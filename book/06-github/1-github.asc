== GitHub

GitHub is the single largest host for Git repositories, and is the central point of collaboration for millions of developers and projects.
A large percentage of all Git repositories are hosted on GitHub, and most open-source projects use it for Git hosting, issue tracking, code review, and other things.
So while it's not exactly related to Git itself, there's a good chance that you'll need to interact with GitHub during your Git travels.

This chapter is about using GitHub.
We'll cover signing up for and managing an account, creating and using Git repositories, common workflows, interacting with projects, lots of little tips to make your life easier, and GitHub's programmatic interface.

=== Setting Up a User Account

The first thing you need to do is set up a free user account.
Simply visit https://github.com[], choose a user name that isn't already taken, provide an email address and a password, and click the big green ``Sign up for GitHub'' button.

.The GitHub sign-up form.
image::images/signup.png[The GitHub sign-up form.]

The next thing you'll see is the pricing page for upgraded plans, but it's safe to ignore this for now.
GitHub will send you an email to verify the address you provided.
Go ahead and do this, it's pretty important (as we'll see later).

[NOTE]
====
GitHub provides all of its functionality with free accounts, with the limitation that all of your projects are fully public (everyone has read access).
GitHub's paid plans include a set number of private projects, but we won't be covering those in this book.
====

Clicking the octocat logo at the top-left of the screen will take you to your dashboard page.
You're now ready to use GitHub.

==== SSH Access

As of right now, you're fully able to connect with Git repositories using the `https://` protocol.
If you'd like to use SSH remotes, you'll need to configure a public key.
(If you don't already have one, see <<_generate_ssh_key>>.)
Open up your account settings using the link at the top-right of the window:

.The ``Account settings'' link.
image::images/accountsettings.png[The ``Account settings'' link.]

Then select the ``SSH keys'' section along the left-hand side.

.The ``SSH keys'' link.
image::images/sshkeys.png[The ``SSH keys'' link.]

From there, click the ``Add an SSH key'' button, give your key a name, paste the contents of your `~/.ssh/id_rsa.pub` (or whatever you named it) public-key file into the text area, and click ``Add key''.

Next you can create a new repository.

=== Projects

The basic unit of operation on GitHub is the project.
Every project is centered on a Git repository, with several other tools surrounding and interacting with it.
Almost none of this is available outside a repository, so let's create one.

==== Creating a Repository

Start by clicking the ``New repository'' button on the right-hand side of the dashboard.

.The ``Your repositories'' area.
image::images/newrepo.png[The ``Your repositories'' area.]

This takes you to the ``new repository'' form:

.The ``new repository'' form.
image::images/newrepoform.png[The ``new repository'' form.]

All you really have to do here is provide a project name; the rest of the fields are completely optional.
For now, just click the ``Create Repository'' button, and boom – you have a new repository on GitHub, named `<user>/<name>`.

Since you have no code there yet, GitHub will show you instructions for how create a brand-new Git repository, or connect an existing Git project.
We won't belabor this here; if you need a refresher, check out <<_git_basics_chapter>>.

Now that your project is hosted on GitHub, you can give the URL to anyone you want to share your project with.
Every project on GitHub is accessible over HTTP as `https://github.com/<user>/<project>`, and over SSH as `git@github.com:<user>/<project>`.
You can fetch from and push to both of these URLs, but they are access-controlled based on the credentials of the user connecting to them.

==== Adding Collaborators

Let’s add the rest of the team.
If John, Josie, and Jessica all sign up for accounts on GitHub, and you want to give them push access to your repository, you can add them to your project as collaborators.
Doing so will give them ``push'' access, which means they have both read and write access to the project and Git repository.

Click the ``Settings'' link in the right-hand sidebar.

.The repository settings link.
image::images/reposettingslink.png[The repository settings link.]

Then select ``Collaborators'' from the menu on the left-hand side.
Then, just type a username into the box, and click ``Add collaborator.''
You can repeat this as many times as you like to grant access to everyone you like.
If you need to revoke access, just click the ``X'' on the right-hand side of their row.

[NOTE]
====
This feature is designed for collaboration with one or two people.
Later on in <<_github_orgs>>, we'll cover Organizations and Teams (which are much better for controlling access to larger numbers of people you know) and in <<_github_pull_requests>> we'll talk about Pull Requests (which are designed for collaborating with complete strangers).
====

==== Your Project

After you push your project up or have it imported from Subversion, you have a main project page that looks something like Figure 4-13.

.A project home page.
image::images/hubot.png[A project home page.]

When people visit your project, they see this page.
Along the top, there's a view of the commits, branches, releases, and contributors in this project, each of which takes you to more detail on these topics.
Along the side are the main activities you'll be using for your project:

* ``Code'' shows the latest version of the files in the repository, as well as a rendered view of the readme.
* ``Issues'' is where you go for reported problems or suggestions.
* ``Pull Requests'' are potential contributions, or work in progress.
* The ``Wiki'' is often used for contributor documentation.
* ``Pulse'' shows what's been happening in this project lately.
* ``Graphs'' has several analytical views of repository activity.
* ``Network'' shows a visual graph of this project and all its forks.

Don't worry if some of these don't make sense just yet.
We'll be covering them in the upcoming sections.

==== Forking Projects

If you want to contribute to an existing project to which you don’t have push access, you can ``fork'' the project.
What this means is that GitHub will make a copy of the project that is entirely yours; it lives in your user's namespace, and you can push to it.

This way, projects don’t have to worry about adding users as collaborators to give them push access.
People can fork a project, push to it, and contribute their changes back to the original repository by creating what's called a Pull Request.
This opens up a discussion thread with code review, and the owner and the contributor can then communicate about the change until the owner is happy with it, at which point the owner can merge it in.

To fork a project, visit the project page (in this case, `github/hubot`) and click the ``Fork'' button at the top-right of the page.

.The ``Fork'' button.
image::images/forkbutton.png[The ``Fork'' button.]

After a few seconds, you'll be taken to your new project page, which leads us to why the heck you'd want to do this in the first place.

=== The GitHub Flow

GitHub is designed around a particular collaboration workflow, centered on Pull Requests.
This flow works whether you're collaborating with a tightly-knit team in a single shared repository, or a globally-distributed network of strangers contributing to an open-source project through dozens of forks.

Here's how it works:

1. Create a branch from `master`.
2. Make some commits.
3. Open a Pull Request.
4. Discuss and continue committing.
5. Merge or close the PR.

Step 1 is pretty straightforward; all work in the GitHub flow takes place on branches, so it's isolated from the `master` branch.

Step 2 means you get a start on what you're doing.
Make a couple of steps in the direction you think the project is going to go.

Step 3 might seem a little early.
The work isn't finished, so why are you asking for it to be merged?
The reason is that opening a Pull Request doesn't just say ``here's some work I've done, it's ready for you to merge.''
What you're really saying is ``here's an idea I had, do you like where I'm going with it?''
Opening the Pull Request broadcasts to your team that you're working on something that they should see, and also (if your tooling is set up) starts the continuous-integration machinery to work on it.

Which leads us to step 4, which is where Pull Requests are their most useful.
Ongoing work turns into a conversation, because people on your team can see what you're working on, and help you out.
Since you essentially told your whole team ``hey, can you come look at this?'' they usually do.
The branch is still open, so you can continue making commits on it, either to continue work or to respond to feedback.
All this time, your team can provide more feedback, and the CI server is validating the changes.

At some point the Pull Request life cycle ends.
If the team is happy with the changes, they can merge the PR, and maybe throw a launch party.
If they decide this particular change isn't something they want, or that there's a better way, it can be closed.
Opening a PR early can often save weeks of work if the project is going in the wrong direction.


=== Discussions

Pull Requests and Issues both fall under the heading of ``discussions.''
These discussions have some interesting features that make them especially useful when working on software.
Let's take a look at when you should use each one, annd how best to use them.

[[_github_pull_requests]]
==== Pull Request vs. Issue vs. Discussion

TODO: Will Discussions ship?

Pull Requests and Issues seem like completely different things, but in reality they're the same.
A Pull Request is actually just an Issue with a Git branch attached.
Apart from that, they are identical; both have a title, description, and comments; both can belong to a Milestone; both trigger notifications; and so on.
They're used for very different things, however.

An Issue is used to report a problem, or post a reminder for work to be done later, or just to ask a question.
Pull Requests, on the other hand, are used to propose a change.
These lines aren't cut into stone, however; some of the most effective bug reports are Pull Requests that include a unit test that isolates the problem.

==== Markdown

One of the features that all discussions share is Markdown.
Markdown is a way of decorating plain text that adds emphasis and structure.
It's designed to be readable without any extra processing, but also to be translated into richly formatted HTML.

An example might help.
Markdown looks like this:

[source,markdown]
----
*Italics* and **bold text** are possible. So are [links][github].

[github]: http://github.com/
----

That block of text renders in a GitHub description or comment like this:

////////////////////////////////////////////////////////////////
Yeah, I'm cheating. Sue me.
////////////////////////////////////////////////////////////////
====
_Italics_ and *bold text* are possible. So are http://github.com/[links].
====

In addition to the basics, GitHub includes Markdown features that are tailored to the needs of developers.
A good example of this is fenced code blocks, which look like this:

[source,markdown]
----
```ruby
puts "Hello, Markdown!"
```
----

The text between the triple-backquote markers (+```+) will be treated as code, and ignored by Markdown.
GitHub will try to detect what language the code snippet is in and provide syntax highlighting; you can give it a hint as to the language with a name just after the opening block (+```ruby+ above).

Another sometimes-useful, sometimes silly feature is Emoji integration.
If a picture is worth a thousand words, an Emoji can sometimes be worth five or ten.
GitHub translates the text +:sheep::dash:+ into a pictorial representation that looks like this:

.+:sheep::dash:+ rendered.
image::images/emoji.png[+:sheep::dash:+ rendered.]

GitHub-flavored Markdown can do even more than this, including tables, checklists, and autolinks.
Take a look at https://help.github.com/articles/github-flavored-markdown[] for a complete description.

==== Notifications

In order to contribute to or manage a project, you need to know what's going on.
GitHub keeps you informed through a mechanism called notifications.
You'll receive notifications for event streams in several kinds of situations.
If you're ``watching'' a repository, you'll get notified of new issues and pull requests; comments on issues, pull requests, and commits; and newly published releases.
If you're not watching a repository, you'll only be subscribed to a discussion if you're the target of an `@mention`, if an issue is assigned to you, if you've commented on a thread, or if a comment is added to something you made (a commit, or discussion).

An `@mention` is a handy way to get someone's attention.
If you include `@john` in a comment, the user named `john` is notified of your comment, and automatically subscribed to the discussion thread that comment is on.
This is a great way of managing your notification volume; large teams can generate a lot of them, so you can control when you participate.

==== Email

Notifications arrive through two channels: the notifications view at https://github.com/notifications[], and via email.
This is controlled by the settings at https://github.com/settings/notifications[].

.Notification settings.
image::images/notifications.png[Notification settings.]

The email notifications have a couple of unique features.
Firstly, you can simply reply to an email, and your comment will show up in the discussion thread, almost as though you went to the website and typed it in.
The main difference is that email replies won't be Markdown-formatted.

The emails are also designed to dovetail with Gmail's ``mute'' feature:

* If you're subscribed to a discussion that you're not actively participating in, and that you're not interested in, you can mute the thread in Gmail.
* If you are then summoned with an `@mention` in the thread, the email notification will have you in the `cc` field, which bypasses the mute filter and shows you the email thread again.

==== Autolinked Discussions

Just one more thing before we leave discussions behind.
GitHub's Markdown parser can also link to other discussions.
Writing text like `this is just like #49` will change ``#49'' into a link to the issue or pull request whose number is 49.
A back-link will also be inserted into the discussion thread on the target discussion (though this doesn't trigger a notification).

This is a great way of networking discussions together, but it has another benefit.
If you write something like `fixes #7` or `closes #739` in a pull request description or commit message, the target issue will be closed whenever the PR is merged, or the commit becomes reachable from the `master` branch.
This is really great for fixing bugs or managing user stories.

Next, let's talk about how to match up repositories and people.

[[_github_orgs]]
=== Organizations

In addition to single-user accounts, GitHub has what are called Organizations.
Organizational accounts have a namespace where projects exist, but most other things are different.
These accounts represent a group of people with shared ownership of projects, and they provide tools to manage subgroups of those people.

An organization is pretty easy to create; just click on the ``+'' icon at the top-right of any GitHub page, and select ``New organization'' from the menu.

.The ``New organization'' menu item.
image::images/neworg.png[The ``New organization'' menu item.]

Follow the steps (a credit card is required, even for the free plan), and you'll soon be the owner of a brand-new organization.
As an owner, when you fork a repository, you'll have the choice of forking it to your organization's namespace, and you automatically ``watch'' any new repository created under that organization.

==== Teams

Organizations are associated with inidividual people by way of teams, which are simply a set of individual user accounts.
The power of teams comes with how they tie into other GitHub features.

Organizations don't grant access to their repositories to _users_, they grant it to _teams_.
For example, say your company has three repositories: `frontend`, `backend`, and `deployscripts`.
You'd want your HTML/CSS/Javascript developers to have access to `frontend` and maybe `backend`, and your ops people to have access to `backend` and `deployscripts`.
Teams make this easy, without having to tweak the settings for every single user.

But that's not all teams are good for.
Team `@mentions` (such as `@acmecorp/frontend`) work much the same as they do with individual users, except that *all* members of the team are then subscribed to the thread.
This is useful if you want the attention from someone on a team, but you don't know exactly who to ask.

A user can belong to any number of teams, so don't limit yourself to only access-control teams.
Special-interest teams like `ux`, `css`, or `refactoring` are useful for certain kinds of questions, and others like `legal` and `colorblind` for an entirely different kind.


=== Tips and Tricks

==== Importing

==== Subversion Interop

==== hub or gh

==== pull-request refs

==== keyboard shortcuts

==== ignore whitespace

==== rev-parse specs

==== commits by author

==== .diff and .patch

==== Line linking

==== Search/Command Bar

=== The API

=== Summary

That’s all we’ll cover about GitHub, but it’s important to note how quickly you can do all this.
You can create an account, add a new project, and push to it in a matter of minutes.
If your project is open source, you also get a huge community of developers who now have visibility into your project and may well fork it and help contribute to it.
At the very least, this may be a way to get up and running with Git and try it out quickly.
In the next chapter, you'll learn more powerful tools and tips for dealing with complex situations, which will truly make you a Git master.
